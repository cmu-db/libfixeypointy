# Fast Fixed-Point Decimals

## Overview - Guide
>What motivates this to be implemented? What will this component achieve? 

## Scope - Taoxi
>Which parts of the system will this feature rely on or modify? Write down specifics so people involved can review the design doc

### Libfixeypointy:
- Overflow checks will be added.
- Verification tests will be added to cross-check Libfixeypointy results with the following libraries:
    - Python: decimal
    - Java: math.BigDecimal
- Benchmark tests will be added to compare Libfixeypointy with:
    - Python decimal
    - GMP floating point (mpf)
- Performance enhancements will be added if applicable.

### Postgres Extension:
- A Postgres extension will be implemented to port Libfixeypointy into Postgres as a user-defined type.
- Boundary conditions (e.g., overflows) will be caught and handled.
- Verification tests will be added to check the porting effort does not introduce new bugs.
- Benchmark tests will be added to compare the performance of our UDT with: 
    - Postgres builtin NUMERIC type
    - Postgres builtin floating point type

## Glossary (Optional) - Guide
>If you are introducing new concepts or giving unintuitive names to components, write them down here.

## Architectural Design - JK/Guide
>Explain the input and output of the component, describe interactions and breakdown the smaller components if any. Include diagrams if appropriate.

## Design Rationale - JK
>Explain the goals of this design and how the design achieves these goals. Present alternatives considered and document why they are not chosen.

## Testing Plan - Taoxi
>How should the component be tested?

### Libfixeypointy:
- A C++ driver program will be implemented to read from input test sequence, perform all operations, recording all intermediate results (inclusing errors), and write to output file for comparison.
- A Python driver program will be implemented with the native decimal class to read from input test sequence, perform all operations, recording all intermediate results (including errors), and write to output file for comparison.
- A Java driver program will be implemented with math.BigDecimal to read from input test sequence, perform all operations, recording all intermediate results (including errors), and write to output file for comparison.
- Test generators will be written in python and/or Java to generate operation chains suitable for their corresponding decimal libraries.

### Postgres Extension:
- A Python generator will be written to generate insertable data into Postgres with column type as our UDT. Test queries of the following form will be added:
    - colA op colB
    - SUM(colA)
- All tests will be verified with a 4-way comparison between:
    - Reference results generated by running the test with Python decimal 
    - Reference results generated by running the test with Java BigDecimal
    - Results generated from Postgres using NUMERIC as the column type
    - Results generated from Postgres using our UDT as the column type

## Trade-offs and Potential Problems
>Write down any conscious trade-off you made that can be problematic in the future, or any problems discovered during the design process that remain unaddressed (technical debts).

## Future Work
>Write down future work to fix known problems or otherwise improve the component.
